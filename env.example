# ============================================
# Без |Паузы - Переменные окружения
# ============================================
# Скопируйте этот файл в .env.local и заполните значения
# cp env.example .env.local

# ============================================
# ОБЯЗАТЕЛЬНЫЕ ПЕРЕМЕННЫЕ
# ============================================

# Supabase - База данных и аутентификация
# Получите в Supabase Dashboard → Settings → API
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Supabase Service Role Key (для серверных операций с полными правами)
# ВАЖНО: Никогда не используйте в клиентском коде!
# Получите в Supabase Dashboard → Settings → API → service_role key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# URL сайта (используется для метаданных, ссылок, email)
# Для production: https://bezpauzy.ru
# Для staging: https://staging.bezpauzy.ru
NEXT_PUBLIC_SITE_URL=https://bezpauzy.ru

# ============================================
# EMAIL (Resend)
# ============================================

# Resend API Key для отправки email
# Получите на https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxxxxx

# Email отправителя (должен быть верифицирован в Resend)
# ВАЖНО: Используйте email с домена, который верифицирован в Resend (bezpauzy.ru)
RESEND_FROM_EMAIL=Без |Паузы <noreply@bezpauzy.ru>

# Альтернативное имя для EMAIL_FROM (если используется)
EMAIL_FROM=noreply@bezpauzy.ru

# ============================================
# n8n WEBHOOKS (Newsletter)
# ============================================

# Webhook для отправки письма подтверждения подписки
N8N_CONFIRMATION_WEBHOOK=https://puchkova.app.n8n.cloud/webhook/confirmation-email

# Webhook для отправки приветственного письма
N8N_WELCOME_WEBHOOK=https://puchkova.app.n8n.cloud/webhook/welcome-email

# ============================================
# UPSTASH REDIS (Rate Limiting)
# ============================================

# Upstash Redis REST URL
# Получите на https://console.upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io

# Upstash Redis REST Token
UPSTASH_REDIS_REST_TOKEN=your-redis-token-here

# ============================================
# YOOKASSA (Платежи)
# ============================================

# YooKassa Shop ID
# Получите в личном кабинете YooKassa
YOOKASSA_SHOP_ID=your-shop-id

# YooKassa Secret Key
YOOKASSA_SECRET_KEY=your-secret-key

# ============================================
# TELEGRAM BOT
# ============================================

# Токен Telegram бота
# Получите у @BotFather в Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# Username бота (без @)
TELEGRAM_BOT_USERNAME=bezpauzy_bot

# Telegram канал для публикации контента
TELEGRAM_CHANNEL=@bezpauzy_channel

# Chat ID администратора для уведомлений (опционально)
TELEGRAM_ADMIN_CHAT_ID=123456789

# Секретный токен для верификации webhook (опционально, но рекомендуется)
# Telegram может отправлять этот токен в заголовках для безопасности
TELEGRAM_WEBHOOK_SECRET=your-webhook-secret-here

# ============================================
# ADMIN PANEL
# ============================================

# JWT Secret для админ-панели
# Сгенерируйте случайную строку: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ВАЖНО: Используйте уникальный и безопасный секрет в production!
JWT_SECRET=your-very-secure-random-string-here-change-in-production

# Ссылка на Telegram-группу сообщества (кнопки «Перейти в Telegram-группу» на /community).
# Если группа приватная (Private) — обязательно укажите инвайт-ссылку:
#   Telegram → группа «Сообщество Без | паузы» → Edit group → Invite links → скопировать ссылку.
#   Выглядит как https://t.me/+XXXXXXXX или https://t.me/joinchat/XXXX
# Для публичной группы можно оставить https://t.me/username_группы
# NEXT_PUBLIC_TELEGRAM_COMMUNITY_LINK=https://t.me/+ваша_инвайт_ссылка

# ============================================
# АНАЛИТИКА (Опционально)
# ============================================

# Yandex Metrica
# Получите в настройках счетчика Yandex Metrica
NEXT_PUBLIC_YANDEX_METRIKA_ID=12345678

# Yandex Metrica OAuth Token (для получения данных через API)
# Получите на https://oauth.yandex.ru/authorize?response_type=token&client_id=YOUR_APP_ID
# Требуется для отображения статистики в админ-панели
YANDEX_METRICA_OAUTH_TOKEN=your-oauth-token-here

# Google Analytics 4
# Получите в Google Analytics → Admin → Data Streams
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Google Analytics 4 Service Account (для получения данных через API)
# Создайте Service Account в Google Cloud Console
# Скачайте JSON ключ и сохраните его содержимое в переменную
# Требуется для отображения статистики в админ-панели
GA4_SERVICE_ACCOUNT_KEY={"type":"service_account","project_id":"..."}
GA4_PROPERTY_ID=123456789

# ============================================
# ПРИВЕТСТВЕННОЕ ВИДЕО (Ева на /bot)
# ============================================
# Обязательно задайте NEXT_PUBLIC_WELCOME_VIDEO_URL — плеер грузит видео по этой ссылке в браузере.
# На Vercel добавьте ту же переменную в Environment Variables.
# WELCOME_VIDEO_URL — для прокси через API (опционально, если не задан NEXT_PUBLIC_).
# NEXT_PUBLIC_WELCOME_VIDEO_URL=https://<проект>.supabase.co/storage/v1/object/public/public-assets/welcome-video.mp4
# WELCOME_VIDEO_URL=https://<проект>.supabase.co/storage/v1/object/public/public-assets/welcome-video.mp4

# ============================================
# AI / OPENAI API (для агента)
# ============================================

# OpenAI API Key для LangChain агента
# Получите на https://platform.openai.com/api-keys
# Используется для агента с инструментами (как в n8n)
OPENAI_API_KEY=sk-...

# OpenAI Model (опционально, по умолчанию gpt-4o-mini)
# Доступные модели: gpt-4o-mini, gpt-4o, gpt-4-turbo
OPENAI_MODEL=gpt-4o-mini

# ============================================
# AI / CLAUDE API (альтернатива OpenAI)
# ============================================

# Anthropic Claude API Key
# Получите на https://console.anthropic.com/
# Нужно для генерации ответов бота Евы (если не используете OpenAI)
ANTHROPIC_API_KEY=sk-ant-...

# ============================================
# LAKERA AI (Защита от промпт-инжекции)
# ============================================

# Lakera API Key для защиты от вредоносных промптов
# Получите на https://platform.lakera.ai/
# Используется для проверки безопасности пользовательских запросов
LAKERA_API_KEY=your-lakera-api-key-here

# ============================================
# JWT SECRET (для сессий)
# ============================================

# Секретный ключ для подписи JWT токенов сессий
# Сгенерируйте случайную строку (минимум 32 символа)
# Для production: используйте криптографически стойкий ключ
# Пример генерации: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-key-here-minimum-32-characters

# ============================================
# ПРИМЕЧАНИЯ
# ============================================

# 1. Все переменные с префиксом NEXT_PUBLIC_ доступны в браузере
#    НЕ храните секреты в NEXT_PUBLIC_ переменных!

# 2. SUPABASE_SERVICE_ROLE_KEY имеет полный доступ к базе данных
#    Используйте только в серверных API routes

# 3. Для production используйте отдельные значения:
#    - Отдельная база данных Supabase
#    - Отдельные API ключи
#    - Production домен

# 4. Проверьте, что .env.local добавлен в .gitignore
#    Никогда не коммитьте .env.local в Git!

# 5. После изменения переменных перезапустите dev сервер:
#    npm run dev
