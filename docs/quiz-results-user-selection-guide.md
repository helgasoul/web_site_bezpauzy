# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—ã–±–æ—Ä—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ

–£ –≤–∞—Å –µ—Å—Ç—å **–¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –≤ —Å–∏—Å—Ç–µ–º–µ:
1. **id: 111** - `username: helgasoul`, `telegram_id: 0`
2. **id: 110** - `username: NULL`, `telegram_id: 374683580`

–û–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–Ω–µ –∏–º–µ—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–≤–∏–∑–æ–≤** (`quiz_count: 0`).

## ü§î –ö–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:

1. **–ö–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏?**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `/api/debug/quiz-results` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–æ–π `userId` –≤ —Å–µ—Å—Å–∏–∏
   - –≠—Ç–æ –∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

2. **–ö–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω —Ä–∞–Ω—å—à–µ?**
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∏–∑ —à–∞–≥–∞ 1 –≤ `quiz-results-fix-user-mapping.sql`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–∏–º `created_at` - –≤–µ—Ä–æ—è—Ç–Ω–æ, –æ—Å–Ω–æ–≤–Ω–æ–π

3. **–ö–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π telegram_id?**
   - –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Telegram –±–æ—Ç–∞, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —Ç–æ—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ `telegram_id = 374683580`
   - –≠—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `id: 110`

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - `id: 111` (helgasoul)**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –£ –Ω–µ–≥–æ –µ—Å—Ç—å `username` (helgasoul)
- –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–º—É username –∏–∑ –ª–æ–≥–æ–≤
- `telegram_id: 0` –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å, —á—Ç–æ Telegram –µ—â–µ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - id: 111

```sql
-- –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–≤–∏–∑–∞
UPDATE menohub_quiz_results
SET user_id = 111
WHERE id = 'd6c2df50-1f99-44d3-abc1-fcb78aa1fd52'
  AND user_id IS NULL;
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - id: 110

```sql
-- –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–≤–∏–∑–∞
UPDATE menohub_quiz_results
SET user_id = 110
WHERE id = 'd6c2df50-1f99-44d3-abc1-fcb78aa1fd52'
  AND user_id IS NULL;
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ï—Å–ª–∏ –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —ç—Ç–æ –≤—ã, –º–æ–∂–Ω–æ:
1. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, id: 111)
2. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (id: 110), –µ—Å–ª–∏ –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω
3. –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å id: 110, –¥–æ–±–∞–≤–∏–≤ username –∏ —Å–≤—è–∑–∞–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

## ‚úÖ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `user_id`:
1. –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Å–≤—è–∑–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
2. –û–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –¥–∞—à–±–æ—Ä–¥–µ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
SELECT 
    u.id,
    u.username,
    u.telegram_id,
    COUNT(qr.id) as quiz_count
FROM menohub_users u
LEFT JOIN menohub_quiz_results qr ON u.id = qr.user_id
WHERE u.id IN (110, 111)
GROUP BY u.id, u.username, u.telegram_id;
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –£ –æ–¥–Ω–æ–≥–æ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π `quiz_count` –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å `1` (–∏–ª–∏ –±–æ–ª—å—à–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)

