# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –§–æ—Ä–º–∞ —Å–æ–≥–ª–∞—Å–∏—è –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ Telegram

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π —Å–æ–≥–ª–∞—Å–∏—è

**–§–∞–π–ª**: `components/auth/TelegramLinkModal.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- ‚úÖ –§–æ—Ä–º–∞ —Å —á–µ–∫–±–æ–∫—Å–æ–º —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ç–µ–∫—Å—Ç–µ –∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è"
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å" (–∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –≥–∞–ª–æ—á–∫–µ)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è" –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–∏—è
- ‚úÖ –ü–æ–∫–∞–∑ —Ñ–æ—Ä–º—ã —Å–æ–≥–ª–∞—Å–∏—è –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞

**UI/UX**:
- –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### 2. API endpoint —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–æ–≥–ª–∞—Å–∏—è

**–§–∞–π–ª**: `app/api/auth/link-telegram/generate-code/route.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `consentGiven: true` –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏ 400, –µ—Å–ª–∏ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `consent_granted = TRUE` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–æ–≥–ª–∞—Å–∏—è

### 3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

**–§–∞–π–ª**: `app/privacy/page.tsx`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ 10 —Ä–∞–∑–¥–µ–ª–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è
  2. –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º—ã —Å–æ–±–∏—Ä–∞–µ–º
  3. –¶–µ–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  4. –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
  5. –í–∞—à–∏ –ø—Ä–∞–≤–∞
  6. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
  7. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  8. Cookies –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
  9. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ü–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
  10. –ö–æ–Ω—Ç–∞–∫—Ç—ã
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –∏–∫–æ–Ω–∫–∞–º–∏
- ‚úÖ SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (metadata)
- ‚úÖ –°—Å—ã–ª–∫–∞ "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"

### 4. –°—Å—ã–ª–∫–∞ –≤ —Ñ—É—Ç–µ—Ä–µ

**–§–∞–π–ª**: `components/layout/Footer.tsx`

**–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ `/privacy` –≤ —Ñ—É—Ç–µ—Ä–µ —Å–∞–π—Ç–∞

## üîÑ Flow —Ä–∞–±–æ—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram"
   ‚Üì
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π —Å–æ–≥–ª–∞—Å–∏—è
   ‚Üì
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–≥–ª–∞—Å–∏—è
   ‚Üì
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å "–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏"
   ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /privacy –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
   ‚Üì
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞–≤–∏—Ç –≥–∞–ª–æ—á–∫—É "–Ø –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ..."
   ‚Üì
6. –ö–Ω–æ–ø–∫–∞ "–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å" —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
   ‚Üì
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å"
   ‚Üì
8. API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–æ–≥–ª–∞—Å–∏—è
   ‚Üì
9. API —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç consent_granted = TRUE –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   ‚Üì
10. API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –ø—Ä–∏–≤—è–∑–∫–∏
   ‚Üì
11. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥ –∏ deep link
   ‚Üì
12. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –±–æ—Ç–∞
   ‚Üì
13. –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–¥ –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç telegram_id
```

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç TelegramLinkModal

**–°–æ—Å—Ç–æ—è–Ω–∏—è**:
- `consentGiven` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏ –≥–∞–ª–æ—á–∫–∞ —Å–æ–≥–ª–∞—Å–∏—è
- `showConsentForm` - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ —Ñ–æ—Ä–º—É —Å–æ–≥–ª–∞—Å–∏—è –∏–ª–∏ –∫–æ–¥
- `loading` - –∏–¥–µ—Ç –ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
- `error` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ú–µ—Ç–æ–¥—ã**:
- `handleConsentAccept()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–≥–ª–∞—Å–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
- `handleConsentDecline()` - –æ—Ç–∫–∞–∑ –æ—Ç —Å–æ–≥–ª–∞—Å–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- `generateLinkCode()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –ø—Ä–∏–≤—è–∑–∫–∏ (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–∏—è)

### API Endpoint

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "consentGiven": true
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ**:
```json
{
  "success": true,
  "code": "ABC123",
  "deepLink": "https://t.me/bezpauzy_bot?start=link_ABC123",
  "nativeDeepLink": "tg://resolve?domain=bezpauzy_bot&start=link_ABC123",
  "expiresAt": "2025-01-21T16:00:00.000Z"
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ**:
```json
{
  "error": "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"
}
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. ‚úÖ **–Ø–≤–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –¥–∞–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
2. ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º** - —Å–æ–±–ª—é–¥–µ–Ω–∏–µ GDPR –∏ –§–ó-152
3. ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π
4. ‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - consent_granted —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
5. ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π UX** - –ø–æ–Ω—è—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–≤—è–∑–∫–∏

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –∏ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
2. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ —Å–æ–≥–ª–∞—Å–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –±–µ–∑ –≥–∞–ª–æ—á–∫–∏
5. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É –∏ –Ω–∞–∂–º–∏—Ç–µ "–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è"
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ–¥ –ø—Ä–∏–≤—è–∑–∫–∏
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ `consent_granted = TRUE` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìÅ –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `components/auth/TelegramLinkModal.tsx` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π —Å–æ–≥–ª–∞—Å–∏—è
- `app/api/auth/link-telegram/generate-code/route.ts` - API endpoint
- `app/privacy/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- `components/layout/Footer.tsx` - —Ñ—É—Ç–µ—Ä —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É

