# Cookie Consent - Руководство

## Обзор

Система управления cookie с согласием пользователя, соответствующая требованиям GDPR и ФЗ-152.

## Компоненты

### 1. CookieConsent (`components/cookies/CookieConsent.tsx`)
- Баннер, появляющийся при первом посещении
- Простой вид с кнопками "Принять все", "Отклонить все", "Настроить"
- Расширенный вид с выбором категорий cookie

### 2. CookieManager (`components/cookies/CookieManager.tsx`)
- Отдельная страница для управления cookie (`/cookies`)
- Позволяет изменить настройки в любое время

### 3. Утилиты (`lib/cookies/manager.ts`)
- Управление настройками cookie
- Сохранение в localStorage и cookie
- Проверка согласия

## Категории Cookie

1. **Необходимые** (всегда включены)
   - Безопасность, сессии, базовые функции
   - Нельзя отключить

2. **Аналитика**
   - Yandex Metrica
   - Google Analytics
   - Можно отключить

3. **Маркетинг**
   - Ретаргетинг
   - Отслеживание конверсий
   - Можно отключить

4. **Функциональные**
   - Предпочтения пользователя
   - Язык, регион, настройки
   - Можно отключить

## Использование

### Проверка согласия

```typescript
import { isCookieCategoryAllowed } from '@/lib/cookies/manager'

if (isCookieCategoryAllowed('analytics')) {
  // Инициализировать аналитику
}
```

### Инициализация аналитики

```typescript
import { initAnalytics } from '@/lib/analytics/init'

// После получения согласия
initAnalytics()
```

## Переменные окружения

```env
NEXT_PUBLIC_YANDEX_METRIKA_ID=ваш_id
NEXT_PUBLIC_GA_ID=ваш_id
```

## Страницы

- `/cookies` - Управление cookie
- `/privacy` - Политика конфиденциальности (обновлена с информацией о cookie)

## Интеграция

Компонент `CookieConsent` автоматически добавлен в `app/layout.tsx` и появляется при первом посещении.

Ссылка на управление cookie добавлена в футер.

## Соответствие требованиям

✅ GDPR (ЕС)
✅ ФЗ-152 (Россия)
✅ Явное согласие перед использованием
✅ Возможность отозвать согласие
✅ Информация о категориях cookie
✅ Ссылка на политику конфиденциальности

