# –ü—Ä–æ–≤–µ—Ä–∫–∞: –ö—É–¥–∞ –≤–µ–¥—É—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥" –∏ "–°–ø—Ä–æ—Å–∏—Ç—å –ï–≤—É"

## üìã –í—Å–µ –∫–Ω–æ–ø–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç –≤ —á–∞—Ç

### 1. **HeroSection** (`components/home/HeroSection.tsx`)
- **–ö–Ω–æ–ø–∫–∞**: "–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ"
- **–°—Å—ã–ª–∫–∞**: `/bot` (–ù–ï `/chat`!)
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/bot`

### 2. **BotHero** (`components/bot/BotHero.tsx`)
- **–ö–Ω–æ–ø–∫–∞**: "–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥"
- **–î–µ–π—Å—Ç–≤–∏–µ**: `router.push('/chat')` ‚úÖ
- **–õ–æ–≥–∏–∫–∞**: –í—Å–µ–≥–¥–∞ –≤–µ–¥–µ—Ç –≤ `/chat`

### 3. **BotCTA** (`components/bot/BotCTA.tsx`)
- **–ö–Ω–æ–ø–∫–∞**: "–°–ø—Ä–æ—Å–∏—Ç—å –ï–≤—É"
- **–î–µ–π—Å—Ç–≤–∏–µ**: `router.push('/chat')` ‚úÖ
- **–õ–æ–≥–∏–∫–∞**: –í—Å–µ–≥–¥–∞ –≤–µ–¥–µ—Ç –≤ `/chat`

### 4. **CTASection** (`components/home/CTASection.tsx`)
- **–ö–Ω–æ–ø–∫–∞**: "–°–ø—Ä–æ—Å–∏—Ç—å –ï–≤—É ‚Üí"
- **–°—Å—ã–ª–∫–∞**: `<Link href="/chat">` ‚úÖ
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/chat`

### 5. **AskEvaWidget** (`components/ui/AskEvaWidget.tsx`)
- **–ö–Ω–æ–ø–∫–∞**: "–°–ø—Ä–æ—Å–∏—Ç—å –ï–≤—É" (–ø–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞)
- **–î–µ–π—Å—Ç–≤–∏–µ**: `router.push('/chat')` ‚úÖ
- **–õ–æ–≥–∏–∫–∞**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –∑–∞—Ç–µ–º –≤–µ–¥–µ—Ç –≤ `/chat`

## üîç –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `/chat`

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`app/chat/page.tsx`)

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏**:
   ```typescript
   const sessionToken = cookieStore.get('telegram_session')?.value
   ```

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å–µ—Å—Å–∏–∏
   - –ó–∞–ø—Ä–æ—Å –∫ –ë–î: `menohub_users` –ø–æ `id`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `subscription_status` –∏–ª–∏ `is_subscribed`

3. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å**:
   ```typescript
   if (user && user.subscriptionStatus === 'active') {
     // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ChatInterface
   } else {
     // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ChatAuthGate
   }
   ```

### –®–∞–≥ 2: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞**:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `ChatInterface` (—á–∞—Ç + –∏—Å—Ç–æ—Ä–∏—è)

**–ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ—Ç –∏–ª–∏ –Ω–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `ChatAuthGate` (—ç–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ø–æ–¥–ø–∏—Å–∫–∏)

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞: –ü—É—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **ChatAuthGate –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`**
   - –í —Å—Ç—Ä–æ–∫–µ 73: `return null` –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
   - –ù–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ - —Ç–æ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è ChatInterface

2. **–£—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**
   - `user.subscriptionStatus !== 'active'`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

3. **–û—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ React

## ‚úÖ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
[chat/page] Session token exists: true/false
[chat/page] Parsed session data: {...}
[chat/page] User found: {...}
[chat/page] Final user state: {...}
[chat/page] RENDERING: {...}
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network (F12 ‚Üí Network)

- –ó–∞–ø—Ä–æ—Å –∫ `/chat` –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML (—Å—Ç–∞—Ç—É—Å 200)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ 500/404

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î

```sql
SELECT 
  id, 
  telegram_id, 
  subscription_status, 
  is_subscribed, 
  subscription_plan
FROM menohub_users
WHERE id = YOUR_USER_ID;
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Å—Å–∏—é

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookie
document.cookie.split(';').find(c => c.includes('telegram_session'))

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
document.querySelector('.bg-white.rounded-3xl')
```

## üîß –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** (F12)
2. **–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥"** –∏–ª–∏ "–°–ø—Ä–æ—Å–∏—Ç—å –ï–≤—É"
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –ª–æ–≥–∏** –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ `[chat/page]`)
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/chat`
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ React DevTools** - –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ flow

```
–ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥" / "–°–ø—Ä–æ—Å–∏—Ç—å –ï–≤—É"
  ‚Üì
router.push('/chat') –∏–ª–∏ <Link href="/chat">
  ‚Üì
app/chat/page.tsx –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ‚Üì
IF user && subscriptionStatus === 'active':
  ‚Üí ChatInterface (—á–∞—Ç + –∏—Å—Ç–æ—Ä–∏—è)
ELSE:
  ‚Üí ChatAuthGate (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ø–æ–¥–ø–∏—Å–∫–∞)
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Å–æ–ª–∏ –∏ Network, —Å–æ–æ–±—â–∏—Ç–µ:
1. –ö–∞–∫–∏–µ –ª–æ–≥–∏ –≤–∏–¥–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏?
2. –ö–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å —É –∑–∞–ø—Ä–æ—Å–∞ `/chat` –≤ Network?
3. –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ React DevTools?

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—É—Å—Ç–∞—è.

