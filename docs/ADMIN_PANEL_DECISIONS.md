# –†–µ—à–µ–Ω–∏—è –ø–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ "–ë–µ–∑ |–ü–∞—É–∑—ã"

## ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ü–æ—Ä—è–¥–æ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
1. **Dashboard** - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
3. **–ó–∞–∫–∞–∑—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ –∫–Ω–∏–≥ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤
4. **–ë–ª–æ–≥** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å—è–º–∏

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- Dashboard –¥–∞–µ—Ç –æ–±—â–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ - –æ—Å–Ω–æ–≤–∞ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ó–∞–∫–∞–∑—ã - –∫—Ä–∏—Ç–∏—á–Ω—ã–π –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å
- –ë–ª–æ–≥ - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ

---

### 2. –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (RBAC)

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** –ù—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ—Å—Ç—É–ø–∞.

#### 2.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–µ–π

**–†–æ–ª–∏ –∏ –∏—Ö –ø—Ä–∞–≤–∞:**

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ |
|------|----------|---------------|
| **Super Admin** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É | –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ |
| **Content Manager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º | –ë–ª–æ–≥, —Ä–µ—Å—É—Ä—Å—ã, –≤–∏–¥–µ–æ, –≥–∞–π–¥—ã, –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î |
| **Order Manager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç |
| **Support Manager** | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, —Ñ–æ—Ä—É–º, —á–∞—Ç —Å –±–æ—Ç–æ–º, –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ |
| **Analyst** | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ | Dashboard, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (read-only) |

#### 2.2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π

**–í–∞—Ä–∏–∞–Ω—Ç 1: –¢–∞–±–ª–∏—Ü–∞ admin_users (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
CREATE TABLE admin_users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id BIGINT REFERENCES menohub_users(id), -- –°–≤—è–∑—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  email TEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL, -- bcrypt hash
  role TEXT NOT NULL CHECK (role IN ('super_admin', 'content_manager', 'order_manager', 'support_manager', 'analyst')),
  is_active BOOLEAN DEFAULT TRUE,
  last_login_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  created_by UUID REFERENCES admin_users(id), -- –ö—Ç–æ —Å–æ–∑–¥–∞–ª —ç—Ç–æ–≥–æ –∞–¥–º–∏–Ω–∞
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_admin_users_email ON admin_users(email);
CREATE INDEX idx_admin_users_role ON admin_users(role);
CREATE INDEX idx_admin_users_user_id ON admin_users(user_id);

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏
ALTER TABLE admin_users ENABLE ROW LEVEL SECURITY;

-- –¢–æ–ª—å–∫–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–æ–≤
CREATE POLICY "Super admins can view all admins"
  ON admin_users FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM admin_users
      WHERE id = auth.uid()::UUID
      AND role = 'super_admin'
      AND is_active = TRUE
    )
  );

-- –¢–æ–ª—å–∫–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–¥–º–∏–Ω–æ–≤
CREATE POLICY "Super admins can create admins"
  ON admin_users FOR INSERT
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM admin_users
      WHERE id = auth.uid()::UUID
      AND role = 'super_admin'
      AND is_active = TRUE
    )
  );
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–µ role –≤ menohub_users (–ø—Ä–æ—â–µ, –Ω–æ –º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)**

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ role –≤ menohub_users
ALTER TABLE menohub_users 
ADD COLUMN admin_role TEXT CHECK (admin_role IN ('super_admin', 'content_manager', 'order_manager', 'support_manager', 'analyst')),
ADD COLUMN is_admin BOOLEAN DEFAULT FALSE;

-- –ò–Ω–¥–µ–∫—Å
CREATE INDEX idx_menohub_users_admin_role ON menohub_users(admin_role) WHERE is_admin = TRUE;
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç 1 (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞) - –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –≥–∏–±–∫–æ.

#### 2.3. Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π

```typescript
// lib/admin/auth.ts
export async function checkAdminRole(
  userId: string,
  requiredRole: 'super_admin' | 'content_manager' | 'order_manager' | 'support_manager' | 'analyst'
): Promise<boolean> {
  const supabase = await createClient()
  
  const { data: admin } = await supabase
    .from('admin_users')
    .select('role, is_active')
    .eq('user_id', userId)
    .eq('is_active', true)
    .single()
  
  if (!admin) return false
  
  // Super admin –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
  if (admin.role === 'super_admin') return true
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ–ª–∏
  const roleHierarchy = {
    'super_admin': 5,
    'content_manager': 4,
    'order_manager': 3,
    'support_manager': 2,
    'analyst': 1
  }
  
  return roleHierarchy[admin.role] >= roleHierarchy[requiredRole]
}
```

#### 2.4. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º

| –†–∞–∑–¥–µ–ª | Super Admin | Content Manager | Order Manager | Support Manager | Analyst |
|--------|-------------|-----------------|---------------|----------------|---------|
| Dashboard | ‚úÖ –ü–æ–ª–Ω—ã–π | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ó–∞–∫–∞–∑—ã | ‚úÖ –í—Å–µ | ‚ùå | ‚úÖ –í—Å–µ | ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ë–ª–æ–≥ | ‚úÖ –í—Å–µ | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –†–µ—Å—É—Ä—Å—ã | ‚úÖ –í—Å–µ | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –í—Ä–∞—á–∏ | ‚úÖ –í—Å–µ | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ß–∞—Ç —Å –±–æ—Ç–æ–º | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –¢–µ—Å—Ç—ã | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ | ‚úÖ –í—Å–µ | ‚úÖ –†–∞—Å—Å—ã–ª–∫–∏ | ‚ùå | ‚úÖ –í—Å–µ | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –í—Å–µ | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –§–æ—Ä—É–º | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è | ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | ‚úÖ –í—Å–µ | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚úÖ –í—Å–µ |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | ‚úÖ –í—Å–µ | ‚ùå | ‚ùå | ‚ùå | ‚ùå |

---

### 3. –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Markdown** –¥–ª—è —Å—Ç–∞—Ç–µ–π.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –¢–∞–±–ª–∏—Ü–∞ `blog_posts` —Ö—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞–∫ `TEXT` (Markdown)
- –í –ø—Ä–æ–µ–∫—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `react-markdown`
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –ë–î: "Article content in Markdown format"

**–†–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Markdown Editor —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º**

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. **SimpleMDE / EasyMDE** - –ø—Ä–æ—Å—Ç–æ–π, –ª–µ–≥–∫–∏–π
2. **React Markdown Editor** - –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π
3. **Tiptap** (Markdown mode) - —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** **React Markdown Editor** –∏–ª–∏ **EasyMDE** —Å:
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Markdown —Å–ª–µ–≤–∞
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø—Ä–∞–≤–∞ (–∏–ª–∏ –≤–∫–ª–∞–¥–∫–∏)
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –ö–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Bold, Italic, Links, Lists, etc.)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
<MarkdownEditor
  value={content}
  onChange={setContent}
  preview={true} // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
  toolbar={['bold', 'italic', 'heading', 'link', 'image', 'list']}
/>
```

---

### 4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ - –≤–∞–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### 4.1. Dashboard (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**
   - –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å–µ–≥–æ–¥–Ω—è/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7/30 –¥–Ω–µ–π)
   - –í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - –†–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≥—Ä–∞—Ñ–∏–∫)

2. **–ó–∞–∫–∞–∑—ã**
   - –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã (—Å–µ–≥–æ–¥–Ω—è/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
   - –í—ã—Ä—É—á–∫–∞ (—Å–µ–≥–æ–¥–Ω—è/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞–∫–∞–∑ (%)
   - –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ (pie chart: pending/paid/shipped/cancelled)

3. **–ö–æ–Ω—Ç–µ–Ω—Ç**
   - –¢–æ–ø-5 —Å—Ç–∞—Ç–µ–π –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º
   - –¢–æ–ø-5 —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ –∑–∞–≥—Ä—É–∑–∫–∞–º
   - –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ (–∑–∞ –Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü)
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

4. **–ß–∞—Ç —Å –±–æ—Ç–æ–º**
   - –ù–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Å–µ–≥–æ–¥–Ω—è/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º (telegram vs website)
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (–ø–æ —Å—Ç–∞—Ç—É—Å—É)

5. **–ü–æ–¥–ø–∏—Å—á–∏–∫–∏**
   - –ù–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ (—Å–µ–≥–æ–¥–Ω—è/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
   - –û—Ç–ø–∏—Å–∫–∏ (–∑–∞ –ø–µ—Ä–∏–æ–¥)
   - –†–æ—Å—Ç –±–∞–∑—ã –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

#### 4.2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–†–∞–∑–¥–µ–ª "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**

1. **–¢—Ä–∞—Ñ–∏–∫**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü (–≥—Ä–∞—Ñ–∏–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏
   - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (direct/organic/social/referral)
   - –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (desktop/mobile/tablet)
   - –ë—Ä–∞—É–∑–µ—Ä—ã
   - –ì–µ–æ–≥—Ä–∞—Ñ–∏—è (—Ç–æ–ø-10 –≥–æ—Ä–æ–¥–æ–≤/—Å—Ç—Ä–∞–Ω)

2. **–ö–æ–Ω–≤–µ—Ä—Å–∏–∏**
   - –í–æ—Ä–æ–Ω–∫–∞: –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å ‚Üí –ü–æ–¥–ø–∏—Å–∫–∞ ‚Üí –ó–∞–∫–∞–∑
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É (%)
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞–∫–∞–∑ (%)
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –±–æ—Ç–∞ (%)
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º —Ç—Ä–∞—Ñ–∏–∫–∞

3. **–ö–æ–Ω—Ç–µ–Ω—Ç**
   - –¢–æ–ø-20 —Å—Ç–∞—Ç–µ–π –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º
   - –¢–æ–ø-10 —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ –∑–∞–≥—Ä—É–∑–∫–∞–º
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ—Å—Ç—ã
   - –í—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (—Å—Ä–µ–¥–Ω–µ–µ)
   - –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–æ–≤ (bounce rate)
   - –ì–ª—É–±–∏–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (pages per session)

4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**
   - –ù–æ–≤—ã–µ vs –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
   - –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
   - Lifetime Value (LTV) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

5. **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è**
   - –í—ã—Ä—É—á–∫–∞ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º/–º–µ—Å—è—Ü–∞–º
   - –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ Paid1/Paid2
   - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- –õ–∏–Ω–µ–π–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–∫–∞–∑—ã, —Ç—Ä–∞—Ñ–∏–∫)
- Pie charts –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (—Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤, –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞)
- Bar charts –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (—Ç–æ–ø —Å—Ç–∞—Ç—å–∏, —Ç–æ–ø —Ä–µ—Å—É—Ä—Å—ã)
- Heatmaps –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ø–æ –¥–Ω—è–º/–≤—Ä–µ–º–µ–Ω–∏)

---

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∞–¥–º–∏–Ω–∫–µ

#### 5.1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**1. YooKassa (–ü–ª–∞—Ç–µ–∂–∏)**
- Shop ID
- Secret Key
- Test mode (–≤–∫–ª/–≤—ã–∫–ª)
- Webhook URL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100)

**2. Telegram Bot**
- Bot Token
- Webhook URL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- Webhook Secret
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–ø—Ä–æ–≤–µ—Ä–∫–∞)
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ª–æ–≥–∏)

**3. Email (SMTP)**
- SMTP Host
- SMTP Port
- SMTP User
- SMTP Password
- From Email
- From Name
- Test email (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∏—Å—å–º–∞)

**4. OpenAI / Anthropic**
- API Key (OpenAI)
- Model (gpt-4o-mini, gpt-4o, etc.)
- API Key (Anthropic) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- Max tokens
- Temperature

**5. Lakera AI**
- API Key
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### 5.2. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**6. Yandex Metrica**
- Counter ID
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**7. Google Analytics**
- Measurement ID
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**8. Supabase**
- URL (read-only, –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
- Service Role Key (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞, —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º)

#### 5.3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
CREATE TABLE admin_settings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  key TEXT UNIQUE NOT NULL, -- 'yookassa_shop_id', 'telegram_bot_token', etc.
  value TEXT, -- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  encrypted BOOLEAN DEFAULT TRUE, -- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ
  category TEXT NOT NULL, -- 'payments', 'integrations', 'email', 'ai', 'analytics'
  description TEXT,
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  updated_by UUID REFERENCES admin_users(id)
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_admin_settings_key ON admin_settings(key);
CREATE INDEX idx_admin_settings_category ON admin_settings(category);
```

**–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (API –∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `crypto` –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è/–¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- –¢–æ–ª—å–∫–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (—Ç–∞–±—ã –∏–ª–∏ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –¢–µ—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π email, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram webhook)
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ (‚úÖ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ / ‚ùå –æ—à–∏–±–∫–∞)

---

### 6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö/–∑–∞—è–≤–∫–∞—Ö.

#### 6.1. –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**

1. **–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã**
   - –ü–æ–ª—É—á–∞—Ç–µ–ª–∏: Order Manager, Super Admin
   - –¢—Ä–∏–≥–≥–µ—Ä: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞ (book_orders, resource_purchases)
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞, –∫–ª–∏–µ–Ω—Ç, —Å—É–º–º–∞, —Å—Ç–∞—Ç—É—Å

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞**
   - –ü–æ–ª—É—á–∞—Ç–µ–ª–∏: Order Manager, Super Admin
   - –¢—Ä–∏–≥–≥–µ—Ä: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞, –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å, –∫–ª–∏–µ–Ω—Ç

3. **–ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**
   - –ü–æ–ª—É—á–∞—Ç–µ–ª–∏: Support Manager, Super Admin
   - –¢—Ä–∏–≥–≥–µ—Ä: –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ (contact_submissions)
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –ò–º—è, email, —Ç–µ–º–∞, —Å–æ–æ–±—â–µ–Ω–∏–µ

4. **–ù–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É**
   - –ü–æ–ª—É—á–∞—Ç–µ–ª–∏: Content Manager, Super Admin (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –¢—Ä–∏–≥–≥–µ—Ä: –ù–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (newsletter_subscribers)
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: Email, –∏–º—è, –∏—Å—Ç–æ—á–Ω–∏–∫

5. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**
   - –ü–æ–ª—É—á–∞—Ç–µ–ª–∏: Super Admin
   - –¢—Ä–∏–≥–≥–µ—Ä: –û—à–∏–±–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ (API, –ø–ª–∞—Ç–µ–∂–∏, –±–æ—Ç)
   - –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –¢–∏–ø –æ—à–∏–±–∫–∏, –æ–ø–∏—Å–∞–Ω–∏–µ, –≤—Ä–µ–º—è

#### 6.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**

```sql
-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–¥–º–∏–Ω–∞
CREATE TABLE admin_notification_settings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  admin_id UUID REFERENCES admin_users(id) ON DELETE CASCADE,
  notification_type TEXT NOT NULL, -- 'new_order', 'order_status_change', 'new_contact', etc.
  email_enabled BOOLEAN DEFAULT TRUE,
  in_app_enabled BOOLEAN DEFAULT TRUE, -- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(admin_id, notification_type)
);
```

**UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –ö–∞–∂–¥—ã–π –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Email –∏ In-app —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ

#### 6.3. In-app —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
- –ë–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –°–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (dropdown –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
- –û—Ç–º–µ—Ç–∫–∞ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã (–∑–∞–∫–∞–∑, –∑–∞—è–≤–∫–∞)

---

## üìã –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- [x] –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [x] –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Markdown) –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
- [x] –ú–µ—Ç—Ä–∏–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- [x] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
