# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
node scripts/check-vector-store.js
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ pgvector
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ menohub_documents
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è match_menohub_documents
- ‚úÖ –ï—Å—Ç—å –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å embeddings

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase Dashboard ‚Üí SQL Editor:

```sql
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
-- supabase/migrations/053_setup_vector_store.sql
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Supabase CLI):

```bash
supabase db push
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ SQL

```sql
INSERT INTO menohub_documents (content, metadata)
VALUES (
  '–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ –º–µ–Ω–æ–ø–∞—É–∑–µ...',
  '{"title": "–ü—Ä–∏–ª–∏–≤—ã –ø—Ä–∏ –º–µ–Ω–æ–ø–∞—É–∑–µ", "category": "—Å–∏–º–ø—Ç–æ–º—ã", "age_group": "46-50"}'::jsonb
);
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ API (–∏–∑ –∫–æ–¥–∞)

```typescript
const { data, error } = await supabase
  .from('menohub_documents')
  .insert({
    content: '–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞...',
    metadata: {
      title: '–ù–∞–∑–≤–∞–Ω–∏–µ',
      category: '—Å–∏–º–ø—Ç–æ–º—ã',
      age_group: '46-50'
    }
  })
```

### –®–∞–≥ 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ embeddings:

```bash
# –î–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ embeddings
node scripts/generate-embeddings.js

# –î–ª—è –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
node scripts/generate-embeddings.js --id <document-id>
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ pgvector —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –¢–∞–±–ª–∏—Ü–∞ menohub_documents —Å–æ–∑–¥–∞–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏—è match_menohub_documents —Å–æ–∑–¥–∞–Ω–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü—É
- [ ] Embeddings —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã: `node scripts/check-vector-store.js`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase:

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
SELECT COUNT(*) FROM menohub_documents;

-- –î–æ–∫—É–º–µ–Ω—Ç—ã —Å embeddings
SELECT COUNT(*) FROM menohub_documents WHERE embedding IS NOT NULL;

-- –ü—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
SELECT 
  id,
  LEFT(content, 100) as preview,
  metadata->>'title' as title,
  metadata->>'category' as category
FROM menohub_documents
LIMIT 5;
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å**: OpenAI embeddings = 1536 –∏–∑–º–µ—Ä–µ–Ω–∏–π
2. **–ú–æ–¥–µ–ª—å**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `text-embedding-3-small` –∏–ª–∏ `text-embedding-ada-002`
3. **–ò–Ω–¥–µ–∫—Å**: ivfflat —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 1000 –≤–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
4. **Rate Limits**: –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embeddings –¥–µ–ª–∞–π—Ç–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `docs/VECTOR_STORE_SETUP.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
