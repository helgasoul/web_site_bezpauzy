# Пошаговая настройка DNS записей для Resend

## Что такое DNS записи и зачем они нужны

DNS записи — это настройки, которые говорят почтовым серверам, что ваш домен разрешает отправку писем через Resend. Без них письма могут попадать в спам или не доходить.

## Шаг 1: Получение DNS записей от Resend

После того, как вы добавили домен в Resend:

1. **Откройте Resend Dashboard** → **Domains**
2. **Найдите ваш домен** в списке
3. **Нажмите на домен** — откроется страница с настройками
4. **Найдите раздел "DNS Records"** или "DNS Configuration"
5. **Вы увидите список записей**, которые нужно добавить:
   - **SPF запись** (обычно 1 запись типа TXT)
   - **DKIM записи** (обычно 2-3 записи типа TXT или CNAME)
   - **DMARC запись** (опционально, тип TXT)

### Пример того, что вы увидите

```text
Type: TXT
Name: @
Value: v=spf1 include:resend.com ~all

Type: TXT
Name: resend._domainkey
Value: p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC...

Type: CNAME
Name: resend
Value: resend.com
```

## Шаг 2: Открытие панели управления DNS

Вам нужно зайти в панель управления вашим доменом. Где это находится, зависит от того, где вы регистрировали домен:

### Если домен на Yandex

1. Зайдите на [yandex.ru/connect](https://connect.yandex.ru)
2. Войдите в аккаунт
3. Найдите ваш домен в списке
4. Нажмите на домен
5. Перейдите в раздел **"DNS"** или **"Управление DNS"**

### Если домен на REG.RU

1. Зайдите на [reg.ru](https://www.reg.ru)
2. Войдите в личный кабинет
3. Перейдите в **"Мои домены"**
4. Нажмите на нужный домен
5. Выберите **"DNS-серверы и зона"**

### Если домен на другом регистраторе

Ищите разделы:

- "DNS настройки"
- "Управление DNS"
- "DNS записи"
- "DNS зона"

## Шаг 3: Добавление SPF записи

**SPF** — это запись, которая разрешает Resend отправлять письма от вашего домена.

1. **В панели DNS найдите кнопку** "Добавить запись" или "Add Record"
2. **Выберите тип записи**: `TXT`
3. **В поле "Имя" или "Name"** введите:
   - `@` (символ собачки) — для основного домена
   - Или оставьте пустым (зависит от панели)
4. **В поле "Значение" или "Value"** скопируйте значение SPF из Resend
   - Обычно выглядит как: `v=spf1 include:resend.com ~all`
5. **Сохраните запись**

## Шаг 4: Добавление DKIM записей

**DKIM** — это записи для подписи писем (защита от подделки).

Обычно нужно добавить **2-3 записи**:

### DKIM запись 1

1. **Тип записи**: `TXT`
2. **Имя**: Скопируйте из Resend (обычно `resend._domainkey` или похожее)
3. **Значение**: Скопируйте длинную строку из Resend (начинается с `p=MIGf...`)
4. **Сохраните**

### DKIM запись 2 (если есть)

1. Повторите те же шаги для второй DKIM записи
2. Имя и значение будут другими (Resend покажет оба)

### DKIM запись 3 (CNAME, если есть)

1. **Тип записи**: `CNAME`
2. **Имя**: Обычно `resend` или что-то похожее
3. **Значение**: Обычно `resend.com`
4. **Сохраните**

## Шаг 5: Добавление DMARC записи (опционально)

**DMARC** — дополнительная защита (можно пропустить на начальном этапе).

Если хотите добавить:

1. **Тип записи**: `TXT`
2. **Имя**: `_dmarc`
3. **Значение**: Скопируйте из Resend (обычно `v=DMARC1; p=none;`)
4. **Сохраните**

## Шаг 6: Проверка правильности

После добавления всех записей:

1. **Вернитесь в Resend Dashboard**
2. **Обновите страницу** с настройками домена
3. **Resend автоматически проверит** DNS записи
4. **Статус изменится** с "Pending" на "Verified" (зеленая галочка)

## Шаг 7: Ожидание верификации

- **Обычно**: 5-30 минут
- **Максимум**: до 48 часов (редко)

**Почему так долго?**

DNS записи распространяются по интернету не мгновенно. Нужно подождать.

**Что делать во время ожидания:**

- Можно закрыть Resend Dashboard
- Продолжить работу над проектом
- Периодически проверять статус (каждые 10-15 минут)

## Частые проблемы и решения

### Проблема: "DNS records not found"

**Решение:**

- Проверьте, что записи добавлены правильно
- Убедитесь, что скопировали значения полностью (без лишних пробелов)
- Подождите еще 10-15 минут

### Проблема: "Invalid format"

**Решение:**

- Проверьте, что не добавили лишние кавычки
- Убедитесь, что тип записи правильный (TXT, CNAME)
- Проверьте, что имя записи точно совпадает с тем, что в Resend

### Проблема: Записи не сохраняются

**Решение:**

- Убедитесь, что у вас есть права на редактирование DNS
- Проверьте, что домен действительно ваш
- Обратитесь в поддержку регистратора домена

## Визуальный пример (Yandex)

```text
Панель Yandex → Домены → Ваш домен → DNS

Нажмите "Добавить запись":

Тип: TXT
Поддомен: @
Значение: v=spf1 include:resend.com ~all
TTL: 3600

[Сохранить]

Повторите для каждой записи из Resend
```

## После успешной верификации

Когда статус станет "Verified":

1. **В `.env.local` укажите**:

   ```env
   RESEND_FROM_EMAIL=Без паузы <noreply@ваш-домен.ru>
   ```

2. **Перезапустите dev-сервер**

3. **Проверьте отправку** — зарегистрируйтесь в сообществе и проверьте почту!

## Альтернатива: Использовать тестовый email

Если настройка DNS кажется сложной, можно использовать тестовый email от Resend:

```env
RESEND_FROM_EMAIL=Без паузы <onboarding@resend.dev>
```

Это работает сразу, без настройки DNS. Письма будут отправляться, но могут попадать в спам.
